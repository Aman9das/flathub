app-id: org.kde.ghostwriter
runtime: org.kde.Platform
runtime-version: 5.15-23.08
base: io.qt.qtwebengine.BaseApp
base-version: 5.15-23.08
sdk: org.kde.Sdk
command: ghostwriter
rename-icon: ghostwriter
finish-args:
  - "--socket=wayland"
  - "--socket=fallback-x11"
  - "--socket=pulseaudio"
  - "--share=ipc"
  - "--share=network"
  - "--device=dri"
cleanup-commands:
  - /app/cleanup-BaseApp.sh
modules:
  - name: cmark
    buildsystem: cmake-ninja
    builddir: true
    sources:
      - type: git
        url: https://github.com/commonmark/cmark.git
        tag: 0.31.0
        commit: 8fbf029685482827828b5858444157052f1b0a5f
        x-checker-data:
          type: anitya
          project-id: 9159
          stable-only: true
          tag-template: $version
  - name: cmark-gfm
    buildsystem: cmake-ninja
    builddir: true
    sources:
      - type: git
        url: https://github.com/github/cmark.git
        tag: 0.29.0.gfm.13
        commit: 587a12bb54d95ac37241377e6ddc93ea0e45439b
        x-checker-data:
          type: anitya
          project-id: 17699
          stable-only: true
          tag-template: $version
  - name: MultiMarkdown
    buildsystem: cmake-ninja
    builddir: true
    sources:
      - type: git
        url: https://github.com/fletcher/MultiMarkdown-6.git
        tag: 6.7.0
        commit: 6b6155d5041a023d0de44adf182506c52202a03c
        x-checker-data:
          type: anitya
          project-id: 131019
          stable-only: true
          tag-template: $version
  - name: Pandoc
    buildsystem: simple
    build-commands:
      - mkdir -p /app/
      - cp -r bin/ /app/
    sources:
      - type: archive
        only-arches: ["x86_64"]
        url: https://github.com/jgm/pandoc/releases/download/3.1.12.3/pandoc-3.1.12.3-linux-amd64.tar.gz
        sha256: f80df137a070e0c05b7f6a3f8f1799124bacf15b57e05890488a7f49f614da09
        x-checker-data:
          type: anitya
          project-id: 2589
          stable-only: true
          url-template: https://github.com/jgm/pandoc/releases/download/$version/pandoc-$version-linux-amd64.tar.gz
      - type: archive
        only-arches: ["aarch64"]
        url: https://github.com/jgm/pandoc/releases/download/3.1.12.3/pandoc-3.1.12.3-linux-arm64.tar.gz
        sha256: f80a4fca157f24ae6912cf8bed4b92fa2e5e5c5b98d0a7b675bc8536deb65602
        x-checker-data:
          type: anitya
          project-id: 2589
          stable-only: true
          url-template: https://github.com/jgm/pandoc/releases/download/$version/pandoc-$version-linux-arm64.tar.gz

  - name: ghostwriter
    buildsystem: cmake-ninja
    builddir: true
    sources:
      - type: archive
        url: https://download.kde.org/stable/release-service/24.02.1/src/ghostwriter-24.02.1.tar.xz
        sha256: 1f039e7f42c6c204f01bed14a6b365faafcc2fc454330258fe52265404a79274
        x-checker-data:
          type: anitya
          project-id: 18298
          stable-only: true
          tag-template: $version
          url-template: https://download.kde.org/stable/release-service/$version/src/ghostwriter-$version.tar.xz
